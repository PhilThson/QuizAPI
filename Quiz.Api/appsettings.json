{
    "Logging": {
        "LogLevel": {
            "Default": "Information",
            "Microsoft.AspNetCore": "Warning"
        }
    },
    "ConnectionStrings": {
        "Default": "Data Source=sql_server,1433;Initial Catalog=PlacowkaQuizDb;User ID=sa;Password=Str0ngP@ssw0rd;TrustServerCertificate=true"
        //Działająca wersja na dockerze:
        //"Default": "Server=sql_server;Database=PlacowkaQuizDb;User Id=sa;Password=Str0ngP@ssw0rd;TrustServerCertificate=true;Persist Security Info=True;Trusted_Connection=True;Integrated Security=False"
    },
    "AllowedHosts": "*",
    "Kestrel": {
        "EndPoints": {
            "Http": {
                "Url": "http://+:5111"
            },
            "Https": {
                "Url": "https://+:7011"
            }
        }
    },
    "NLog": {
        "throwConfigExceptions": true,
        "targets": {
            "async": true,
            "database": {
                "type": "Database",
                "dbProvider": "System.Data.SqlClient",
                "connectionString": "Data Source=sql_server,1433;Initial Catalog=PlacowkaQuizDb;User ID=sa;Password=Str0ngP@ssw0rd;TrustServerCertificate=true",
                "keepConnection": "true",
                "commandText": "INSERT INTO Logs (Timestamp,Level,Message,Exception,Logger,RequestUrl,RequestType,StackTrace) VALUES (@timestamp, @level, @message, @logger, @exception, @requestUrl, @requestType, @stackTrace);",
                "parameters": [
                    {
                        "name": "@timestamp",
                        "layout": "${date}"
                        //"dbType": "DbType.DateTime"
                    },
                    {
                        "name": "level",
                        "layout": "${level}"
                    },
                    {
                        "name": "message",
                        "layout": "${message}"
                    },
                    {
                        "name": "logger",
                        "layout": "${logger}"
                    },
                    {
                        "name": "exception",
                        "layout": "${exception:tostring}"
                    },
                    {
                        "name": "requestUrl",
                        "layout": "${aspnet-request-url}"
                    },
                    {
                        "name": "requestType",
                        "layout": "${aspnet-request-method}"
                    },
                    {
                        "name": "stackTrace",
                        "layout": "${stacktrace}"
                    }
                ]
            },
            "logconsole": {
                "type": "Console"
            }
        },
        "rules": [
            {
                "logger": "*",
                "minLevel": "Info",
                "writeTo": "logconsole"
            },
            {
                "logger": "*",
                "minLevel": "Info",
                "writeTo": "database"
            }
        ]
    }
}

